---
import moment from "moment";
import { Button } from "../../../components/ui/button";
import client from "../../../graphql/client/ApolloClient";
import type { IServiceCityPageTypes } from "../../../graphql/generatedType/ServiceAreaDetailsTypes";
import { serviceCityPageQuery } from "../../../graphql/gql/serviceAreaDetails.gql";
import CustomSingleMapSec from "../../../components/CustomFindMap/SingleMap";
import Layout from "../../../layouts/Layout.astro";
import { CloudfrontImg } from "../../../components/ui/CloudfrontImg";
import ServiceLocationV3 from "../../../components/ServiceV3/ServiceLocationV3/ServiceLocationV3";
import ServiceTestimonialV3 from "../../../components/ServiceV3/ServiceTestimonialV3/ServiceTestimonialV3";
import ServiceWallSection from "../../../components/ServiceV3/ServiceWallSection/ServiceWallSection";
import ServiceGetYourSec from "../../../components/ServiceV3/ServiceGetYourSec/ServiceGetYourSec";
import ServiceGetFenceQuote from "../../../components/ServiceV3/ServiceGetFenceQuote/ServiceGetFenceQuote";
import StarIcon from "../../../components/ui/Icons/StarIcon";

const { servicesSlug } = Astro.params;
const { data: servicesDetailsData } = await client.query<IServiceCityPageTypes>(
  {
    query: serviceCityPageQuery,
    variables: {
      id: servicesSlug,
    },
    fetchPolicy: "cache-first",
  }
);
const serviceAreaData = servicesDetailsData?.location?.newLocationPurpose;
console.log(servicesSlug, "servicesSlug");
---

<Layout
  title={servicesDetailsData?.location?.seo?.title}
  description={servicesDetailsData?.location?.seo?.metaDesc}
  metaKeywords={servicesDetailsData?.location?.seo?.metaKeywords}
  opengraphDescription={servicesDetailsData?.location?.seo
    ?.opengraphDescription}
  metaRobotsNofollow={servicesDetailsData?.location?.seo?.metaRobotsNofollow}
  metaRobotsNoindex={servicesDetailsData?.location?.seo?.metaRobotsNoindex}
  twitterDescription={servicesDetailsData?.location?.seo?.twitterDescription}
  twitterTitle={servicesDetailsData?.location?.seo?.twitterTitle}
  twitterImage={servicesDetailsData?.location?.seo?.twitterImage?.mediaItemUrl}
  twitterImage={servicesDetailsData?.location?.seo?.twitterImage?.altText}
  opengraphTitle={servicesDetailsData?.location?.seo?.opengraphTitle}
  opengraphType={servicesDetailsData?.location?.seo?.opengraphType}
  opengraphUrl={servicesDetailsData?.location?.seo?.opengraphUrl}
  opengraphSiteName={servicesDetailsData?.location?.seo?.opengraphSiteName}
  focuskw={servicesDetailsData?.location?.seo?.focuskw}
  canonical={servicesDetailsData?.location?.seo?.canonical}
  schema={servicesDetailsData?.location?.seo?.schema?.raw}
>
  <div>
    <div class="min-h-[960px] lg:min-h-[810px]">
      <div class="relative bannerHome">
        <div class="pt-[200px] pb-[100px] relative z-20 lg:pt-[150px]">
          <CloudfrontImg
            src={servicesDetailsData?.location?.newLocationPurpose
              ?.locationBannerBackgroundImage?.node?.mediaItemUrl}
            alt={servicesDetailsData?.location?.newLocationPurpose
              ?.locationBannerBackgroundImage?.node?.altText}
            width={1920}
            height={961}
            className="absolute top-0 left-0 w-full h-full object-cover z-[-1]"
          />

          <div class="container">
            <div class="min-h-[660px] lg:min-h-[560px]">
              <div
                class="bg-[rgba(255,255,255,.80)] p-[30px] lg:p-[20px] max-w-[730px] lg:mx-auto"
              >
                <div class="flex flex-wrap -m-[9px]">
                  <div class="w-full md:w-full p-[9px] relative bannerlft_cnt">
                    <h1
                      class="font-oswald font-light text-[50px] text-black leading-[1.2em] text-left mb-[20px] md:!text-[36px] xs:!text-[32px]"
                    >
                      {
                        servicesDetailsData?.location?.newLocationPurpose
                          ?.locationBannerHeading
                      }
                    </h1>
                    <div
                      set:html={servicesDetailsData?.location
                        ?.newLocationPurpose?.locationBannerDescription}
                      class="text-[20px] text-black lg:text-[18px] md:!text-[16px] banner_cnt"
                    />

                    <div
                      class="bg-black py-[20px] px-[12px] flex md:flex-wrap justify-between mt-[20px] lftBlack_box"
                    >
                      <p
                        class="text-white font-oswald text-[27px] font-light leading-9 lg:leading-6 xs:text-[20px] max-w-[200px]"
                      >
                        {
                          servicesDetailsData?.location?.newLocationPurpose
                            ?.highestRatedHeading
                        }
                      </p>
                      <i class="-mt-[27px]">
                        <CloudfrontImg
                          src="https://superiorfence.s3.amazonaws.com/wp-content/uploads/2025/05/22113120/badge.webp"
                          alt="badge"
                          width={62}
                          height={94}
                          className="md:w-[50px]"
                        />
                      </i>
                      <div class="text-center md:text-left sm:!mt-[12px]">
                        <span
                          class="text-[21px] font-sourcesans font-normal text-white sm:text-[18px]"
                        >
                          22668 Certified Review
                        </span>
                        <div class="flex items-center xs:flex-wrap xs:mt-[8px]">
                          <ul class="flex items-center space-x-2">
                            <li>
                              <StarIcon />
                            </li>
                            <li>
                              <StarIcon />
                            </li>
                            <li>
                              <StarIcon />
                            </li>
                            <li>
                              <StarIcon />
                            </li>
                            <li>
                              <StarIcon />
                            </li>
                          </ul>
                          <p
                            class="text-[21px] font-sourcesans font-normal text-white pl-[10px] xs:pl-0 xs:w-full xs:pt-[8px]"
                          >
                            {" "}
                            {
                              servicesDetailsData?.location?.newLocationPurpose
                                ?.certifiedReviewsRating
                            }{" "}
                            Average Star Rating
                          </p>
                        </div>
                      </div>
                    </div>
                    <div
                      class="flex items-center justify-between mt-[20px] sm:flex-wrap"
                    >
                      <a
                        href="#url"
                        class="bg-[#821918] hover:bg-[#689689] text-white h-[60px] sm:w-full xs:w-full sm:mb-[10px] flex items-center justify-center py-[10px] px-[20px] font-sourcesans font-bold text-[16px] w-[48%] min-w-auto uppercase md:text-[13px] sm:text-[16px]"
                      >
                        EXPLORE YOUR FINANCING OPTIONS
                      </a>
                      <a
                        href="/request-an-estimate"
                        class="bg-[#689689] hover:bg-[#821918] text-white h-[60px] sm:w-full xs:w-full flex items-center justify-center py-[10px] px-[20px] font-sourcesans font-bold text-[16px] w-[48%] min-w-auto uppercase md:text-[13px] sm:text-[16px]"
                      >
                        GET A FREE FENCE QUOTE
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="min-h-[1500px]">
      <div class="pb-[150px] fenceSecBg lg:pb-[90px] bg-[#a49e8d]">
        <div class="flex md:flex-wrap">
          <div
            class="bg-primary h-[275px] w-[50%] pr-[40px] relative z-[100] -mt-[30px] yrExp_lftcol lg:h-[230px] md:w-full md:pr-0 md:h-[200px] sm:h-[150px] lg:flex lg:items-center lg:justify-end md:justify-center"
          >
            <div
              class="text-right flex items-center justify-end md:justify-center"
            >
              <span
                class="font-oswald text-[180px] font-semibold text-white yrExp_txt lg:text-[120px] sm:text-[80px] xs:text-[60px] md:pr-[10px]"
              >
                {
                  servicesDetailsData?.location?.newLocationPurpose
                    ?.totalYearExperienceNumber
                }
              </span>
              <p
                class="text-[39px] font-oswald font-light text-white year_txt [writing-mode:sideways-lr] md:[writing-mode:horizontal-tb] max-h-[150px] text-left leading-[1.2] lg:text-[32px]"
              >
                Years Experience
              </p>
            </div>
          </div>
          {
            servicesDetailsData?.location?.newLocationPurpose
              ?.totalYearExperienceList.length > 0 && (
              <div class="w-[50%] pl-[140px] yrExp_rgtcol lg:pr-[12px] md:w-full md:pl-[12px] md:mt-[20px]">
                <div class="max-w-[600px] lg:max-w-auto">
                  {servicesDetailsData?.location?.newLocationPurpose?.totalYearExperienceList?.map(
                    (item) => (
                      <div class="mb-[30px] lg:mb-[20px]">
                        <div class="border-b-[2px] border-solid border-primary mb-[20px]">
                          <p class="text-[22px] font-sourcesans font-normal text-white lg:text-[18px]">
                            <span class="text-[50px] font-oswald font-light pr-[20px] lg:text-[40px] sm:text-[30px] xs:text-[28px]">
                              {item?.totalYearExperienceListCount}
                            </span>
                            {item?.totalYearExperienceListHeading}
                          </p>
                        </div>
                        <p class="text-[22px] font-sourcesans font-normal text-white lg:text-[18px]">
                          {item?.totalYearExperienceListDescription}
                        </p>
                      </div>
                    )
                  )}
                </div>
              </div>
            )
          }
        </div>
        <div class="lg:text-center lg:mt-[50px]">
          <div class="container_big">
            <h3
              class="font-sourcesans text-[26px] font-normal text-white md:text-[20px]"
            >
              OUR FENCE CATALOG
            </h3>
            <h4
              class="text-[#821918] text-[40px] font-oswald font-light leading-[1.3] sm:text-[30px] more_txt"
            >
              More Fence Types <br /> Than Anyone Else!
            </h4>
          </div>
        </div>
        <ServiceLocationV3 client:only="react" data={servicesDetailsData} />
      </div>
    </div>

    <ServiceTestimonialV3 client:only="react" data={servicesDetailsData} />

    <div class="bg-[#231F20]">
      <div class="container_big">
        <div class="text-center py-[50px] md:py-[40px]">
          <h2
            class="font-oswald text-[60px] lg:text-[44px] mb-[20px] text-white font-light md:text-[30px] xs:text-[24px]"
          >
            {
              servicesDetailsData?.location?.newLocationPurpose
                ?.viewOurPropertyHeading
            }
          </h2>
          <span
            class="text-white text-[42px] lg:text-[30px] md:text-[24px] block font-light sm:text-[20px]"
          >
            {
              servicesDetailsData?.location?.newLocationPurpose
                ?.viewOurPropertyDescription
            }
          </span>
        </div>
      </div>
    </div>
    <ServiceWallSection client:only="react" data={servicesDetailsData} />
    <div class="bg-[#231F20] p-[8px]"></div>

    <div class="getyour_sec bg-[#a49e8d] py-[100px] md:py-[80px]">
      <div class="container_big">
        <div class="flex flex-wrap -m-[15px] lg:-m-[10px]">
          <div class="w-[40%] p-[15px] lg:p-[10px] lg:w-1/2 md:w-full">
            <h2
              class="text-right lg:text-left font-oswald text-[64px] font-light text-white leading-[1.2em] mb-[30px] get_hding lg:!text-[38px] md:!text-[36px] xs:!text-[30px] md:[&_br]:hidden"
            >
              {
                servicesDetailsData?.location?.newLocationPurpose
                  ?.getYourNewFenceHeading
              }
            </h2>
          </div>
          <div class="w-[60%] p-[15px] lg:p-[10px] lg:w-1/2 md:w-full">
            <div class="pl-[70px] over_lft lg:pl-0 max-w-[604px] lg:max-w-full">
              <ServiceGetYourSec
                client:only="react"
                data={servicesDetailsData}
              />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="bg-primary p-[8px]"></div>

    <div class="py-[100px] md:py-[80px]" id="estimate">
      <div class="container_big">
        <div class="flex md:flex-wrap items-start space-x-8 md:space-x-0">
          <div class="max-w-[calc(100%-482px)] md:max-w-full w-full">
            <h3
              class="text-primary font-oswald text-[64px] font-light mb-[45px] frm_hding md:mb-[30px] md:text-[34px]"
            >
              Get A Free Fence Quote Today
            </h3>
            <ServiceGetFenceQuote client:only="react" />
          </div>
          {
            servicesDetailsData?.location?.newLocationPurpose
              ?.fenceQuoteDescription && (
              <div class="max-w-[482px] md:max-w-full w-full bg-[#a49e8d] py-4 px-[30px] sticky top-[104px] text-center frmRgt_cnt md:mt-[30px] md:ml-0 lg:!text-[16px]">
                <div
                  class="getFenceQuoteV2_text"
                  set:html={
                    servicesDetailsData?.location?.newLocationPurpose
                      ?.fenceQuoteDescription
                  }
                />
              </div>
            )
          }
        </div>
      </div>
    </div>

    <div
      class="py-[100px] bg-[#a49e8d] lg:py-[80px] md:py-[60px]"
      id="service-areas"
    >
      <div class="container_big">
        <div class="mb-[90px] text-center lg:mb-[50px] md:mb-[42px]">
          <h2
            class="font-oswald font-light text-[64px] md:text-[34px] mb-[20px] text-white leading-7 post_hding"
          >
            FENCE POSTS
          </h2>
        </div>
        {
          servicesDetailsData?.posts?.edges?.length > 0 && (
            <div class="grid grid-cols-12 gap-y-[16px] gap-x-[16px] lg:gap-x-[15px] post_col">
              {servicesDetailsData?.posts?.edges.map((item) => (
                <div class="col-span-4 md:col-span-6 xs:col-span-12 post_crd">
                  <div class="relative h-full">
                    <figure class="w-full h-[404px] lg:h-[264px] overflow-hidden m-0 leading-[0]">
                      <a
                        href={`/fence-installation/${item?.node?.slug?.toLocaleLowerCase()}`}
                        class="hover:scale-105 transition-all duration-300 inline-block w-full h-full fence_install_img"
                      >
                        <CloudfrontImg
                          src={item?.node?.featuredImage?.node?.mediaItemUrl}
                          alt={item?.node?.featuredImage?.node?.altText}
                          width={496}
                          height={404}
                          class="w-full h-full object-cover"
                        />
                      </a>
                    </figure>
                    <div class="pt-[20px] lg:pt-[15px]">
                      <h3 class="leading-[1.3] font-oswald text-black  font-light text-[48px] mb-[20px] line-clamp-2 lg:!text-[28px]">
                        <a
                          href={`/fence-installation/${item?.node?.slug?.toLocaleLowerCase()}`}
                          class="hover:text-primary transition-all duration-300"
                        >
                          {item?.node?.title}
                        </a>
                      </h3>
                      <p class="uppercase text-[20px] font-sourcesans font-bold text-black  lg:text-[16px] ">
                        {moment(item?.node?.featuredImage?.node?.date).format(
                          "MMMM DD, YYYY"
                        )}
                      </p>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          )
        }
      </div>
    </div>

    <div class="py-[100px] lg:py-[80px] md:py-[60px]">
      <div class="container_big">
        <h2
          class="text-primary text-[60px] lg:text-[50px] text-center mb-[90px] font-oswald font-light md:text-[40px] lg:mb-[60px] md:mb-[40px] sm:text-[30px]"
        >
          {
            servicesDetailsData?.location?.newLocationPurpose
              ?.fenceResourcesHeading
          }
        </h2>
        {
          servicesDetailsData?.location?.newLocationPurpose
            ?.fenceResourcesListing?.length > 0 && (
            <div class="flex flex-wrap -m-[10px]">
              {servicesDetailsData?.location?.newLocationPurpose?.fenceResourcesListing?.map(
                (item) => (
                  <div class="w-1/2 md:w-full p-[10px]">
                    <a
                      href="#url"
                      class="bg-[#A49E8D] h-[360px] flex items-center justify-center"
                    >
                      <CloudfrontImg
                        src={item?.fenceResourcesListImage?.node?.mediaItemUrl}
                        alt={item?.fenceResourcesListImage?.node?.altText}
                        className="w-[333px] h-[200px] object-cover"
                        width={333}
                        height={200}
                      />
                    </a>
                    <h3 class="font-light font-oswald text-[48px] lg:text-[34px]  sm:text-[28px] mt-[28px] md:mt-[18px] leading-9">
                      <a href="#url" class="hover:text-primary text-black">
                        {item?.fenceResourcesListHeading}
                      </a>
                    </h3>
                  </div>
                )
              )}
            </div>
          )
        }
      </div>
    </div>

    {
      servicesDetailsData?.location?.newLocationPurpose
        ?.exploreFranchiseHeading && (
        <div class="py-[50px] bg-primary explore_sec">
          <div class="container_big">
            <div class="flex md:flex-wrap -m-[15px]">
              <div class="w-1/2 md:w-full p-[15px]">
                <h2 class="text-right text-white font-oswald text-[64px] md:!text-[34px] leading-[1.2em] font-light md:text-left md:[&_br]:hidden">
                  {
                    servicesDetailsData?.location?.newLocationPurpose
                      ?.exploreFranchiseHeading
                  }
                </h2>
              </div>
              <div class="w-1/2 md:w-full p-[15px]">
                <div class="pt-[80px] pl-[30px] explore_rgt md:pl-0">
                  <p class="font-sourcesans font-regular text-[28px] leading-10 text-white">
                    {
                      servicesDetailsData?.location?.newLocationPurpose
                        ?.exploreFranchiseDescription
                    }
                  </p>
                  <Button
                    variant="default"
                    className="mt-8 font-robotobold !text-[20px] !rounded-none h-[63px] min-w-[224px] bg-white !text-primary hover:!bg-black hover:!text-white"
                  >
                    GET STARTED {">"}
                  </Button>
                </div>
              </div>
            </div>
          </div>
        </div>
      )
    }

    <CustomSingleMapSec
      client:only="react"
      locationLat={serviceAreaData?.locationLat}
      locationLong={serviceAreaData?.locationLong}
      mapAreaAddress={serviceAreaData?.mapBlockAddress}
      mapAreaEmail={serviceAreaData?.mapBlockEmail}
      mapAreaHeading={serviceAreaData?.mapBlockHeading}
      mapAreaImage={serviceAreaData?.mapBlockImage}
      mapAreaPhone={serviceAreaData?.mapBlockPhone}
    />

    <div class="py-[150px] lg:py-[100px] md:py-[80px]">
      <div class="container_big">
        <div class="max-w-[1068px] mx-auto">
          <div class="mb-[50px]">
            <div class="flex flex-wrap -m-[10px]">
              <div class="w-[65%] p-[10px] md:w-full">
                <figure class="w-full">
                  <CloudfrontImg
                    src={servicesDetailsData?.location?.newLocationPurpose
                      ?.certifiedReviews?.node?.mediaItemUrl}
                    alt={servicesDetailsData?.location?.newLocationPurpose
                      ?.certifiedReviews?.node?.altText}
                    width={605}
                    height={538}
                    className="size-full object-cover"
                  />
                </figure>
              </div>
              <div class="w-[35%] p-[10px] md:w-full">
                <div class="bg-[#707070] p-[20px] relative">
                  <CloudfrontImg
                    src="https://superiorfence.s3.amazonaws.com/wp-content/uploads/2025/05/22113120/badge.webp"
                    alt="badge"
                    width={56}
                    height={93}
                    className="absolute top-0 right-[26px] w-[56px] h-[93px]"
                  />
                  <p
                    class="text-white font-sourcesans text-[35px] font-normal max-w-[110px] sm:max-w-[150px] sm:text-[26px] leading-8 mb-[20px]"
                  >
                    {
                      servicesDetailsData?.location?.newLocationPurpose
                        ?.certifiedReviewsNumber
                    } Certified Reviews
                  </p>
                  <div class="flex items-center">
                    <ul class="flex items-center space-x-2">
                      <li>
                        <StarIcon />
                      </li>
                      <li>
                        <StarIcon />
                      </li>
                      <li>
                        <StarIcon />
                      </li>
                      <li>
                        <StarIcon />
                      </li>
                      <li>
                        <StarIcon />
                      </li>
                    </ul>
                    <p
                      class="text-white font-roboto font-bold leading-7 pl-[10px]"
                    >
                      {
                        servicesDetailsData?.location?.newLocationPurpose
                          ?.certifiedReviewsRating
                      }
                    </p>
                  </div>
                </div>
                <div class="bg-[#A49E8D] p-[20px]">
                  <h3
                    class="text-[28px] lg:text-[24px] font-oswald font-light text-black mb-[20px]"
                  >
                    {
                      servicesDetailsData?.location?.newLocationPurpose
                        ?.fenceInstallationResourcesHeading
                    }
                  </h3>
                  <ul class="">
                    {
                      servicesDetailsData?.location?.newLocationPurpose
                        ?.fenceInstallationResourcesListing?.length > 0 &&
                        servicesDetailsData?.location?.newLocationPurpose?.fenceInstallationResourcesListing.map(
                          (item) => (
                            <li class="text-[24px] text-black font-sourcesans font-regular mb-[10px] lg:text-[20px] sm:text-[18px]">
                              {">"}
                              {item?.fenceInstallationResourcesListNmae}
                            </li>
                          )
                        )
                    }
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div
            class="ftrtop_cnt"
            set:html={servicesDetailsData?.location?.newLocationPurpose
              ?.mapBelowDescription}
          />
        </div>
      </div>
    </div>
  </div>
</Layout>
